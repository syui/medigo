language: go

go:
        - 1.7

branches:
        only: master

before_install:
        - go get -t -v ./...
        - go get -v github.com/mitchellh/gox
        - go get -v github.com/tcnksm/ghr

script:
        - gox -output "dist/{{.OS}}_{{.Arch}}_{{.Dir}}" -ldflags="-X main.cid=$CLIENT_ID -X main.secret=$CLIENT_SECRET"
        - ghr --username syui --token $GITHUB_TOKEN 0.2 dist/
